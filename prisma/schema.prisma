// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["Farm"]
}

model Farm {
  id          Int           @id @default(autoincrement())
  userId      Int
  farmName    String
  country     String
  province    String?
  area        String
  Coordinates Coordinates[]
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  Cattle      Cattle[]
  Ration      Ration[]

  @@schema("Farm")
}

model Coordinates {
  id        Int    @id @default(autoincrement())
  farmId    Int
  longitude String
  latitude  String
  Farm      Farm   @relation(fields: [farmId], references: [id], onDelete: Cascade)

  @@schema("Farm")
}

model Cattle {
  id           Int           @id @default(autoincrement())
  farmId       Int
  cattleName   String
  gender       String
  breed        String
  dob          DateTime
  age          Int
  cattleStatus CattleStatus?
  vaccinated   Boolean
  image        String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  Farm         Farm          @relation(fields: [farmId], references: [id], onDelete: Cascade)
  MilkYield    MilkYield[]

  @@schema("Farm")
}

model MilkYield {
  id            Int      @id @default(autoincrement())
  cattleId      Int
  milkInLitres  Decimal
  milkYieldDate DateTime
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  Cattle        Cattle   @relation(fields: [cattleId], references: [id], onDelete: Cascade)

  @@schema("Farm")
}

model Ration {
  id             Int            @id @default(autoincrement())
  farmId         Int
  rationCategory RationCategory
  quantity       Int
  purchaseDate   DateTime
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  Farm           Farm           @relation(fields: [farmId], references: [id], onDelete: Cascade)

  @@schema("Farm")
}

enum RationCategory {
  grainMix
  hay
  cornSillage
  water

  @@schema("Farm")
}

enum CattleStatus {
  heifer
  pregnant
  dry
  milking
  sick

  @@schema("Farm")
}
